创造vulkan实例（通过它可以使用vulkan API和描述你的app）和选择物理设备
逻辑设备（使用什么样的物理属性）和队列（任务要提交到队列中执行，如绘制图形 内存操作等）
队列由不同的队列家族派生 不同家族支持不同操作
queue 执行 command

创造窗口和交换链swap chain
窗口用于实时显示渲染出来的图形
KHR表示是vulkan extension  VkSurfaceKHR: window surface，一视同仁处理不同平台的window  窗口管理？
swap chain 是渲染目标的集合？正在渲染的image与在screen 的image不是同一张
The number of render targets and conditions for presenting finished images to the screen depends on the present mode. Common present modes are double buffering (vsync) and triple buffering.

image views 和 framebuffers
VkImageView 指代image的特定部分
VkFramebuffer 指代image views 的color depth or stencil
swap chain 可能有许多image 为每一个image 创造一个image view 和 framebuffer

render passes
指代在渲染操作中使用image的类型和如何使用image的内容
第一个三角形程序中 使用 color 信息
渲染depth image？ color message or distance ？ in your like

graphics pipeline 观看从上帝视角看gpu视频
创造图形渲染管线 vertex fragment hull mesh  merge
VkPipeline 描述显卡的配置状态----视口大小 深度测试 可编程阶段等
需要提前设好pipeline 一点改变需要重新创造VkPipeline
仅有一些操作如视口大小 清除颜色可以动态设置。

 command pools and command buffers
 所有操作需要提前记录在VkCommandbuffer 中
 而它们有VkCommandPool 分配

main loop
从交换链中获取下一个image  vkAcquireNextImageKHR
通过vkQueueSubmit 执行适当的命令buffer
通过vkQueuePrensentKHR 显示image
在Queue中的命令是异步执行，需要使用semaphores等进行同步操作以保证正确的执行顺序

vulkan 对象的创建
vkCreateXXX or vkAllocateXXX
vkDestroyXXX or VkFreeXXX

validation layer:
Checking the values of parameters against the specification to detect misuse
Tracking creation and destruction of objects to find resource leaks
Checking thread safety by tracking the threads that calls originate from 
Logging every call and its parameters to the standard output
Tracing Vulkan calls for profiling and replaying

an example
```cpp
VkResult vkCreateInstance (
	const VkInstanceCreateInfo* pCreateInfo,
	const VkAllocatorCallbacks* pAllocator,
	VkInstance* instance
) {
	if (pCreateInfo == nullptr || instance == nullptr) {
		log("Null pointer passed to required parameter!");
		return VK_ERROR_INITIALIZATION_FAILED;
	}
	return real_vkCreateInstance(pCreateInfo, pAllocator, instance);
}
```

两种layers
instance(与vulkan API相关)
device specific(与GPU相关 废除了)

message callback
默认项标准输出打印调试信息 我们也可以自定义它

queue families
vulkan中几乎所有操作，包括绘制，上传纹理等都需要把command提交到queue中
不同families执行不同的command
but wait, what's the data type of queue families?

logical device
interface with physial device, can be a lot
queue 在 logical device 之上
logical device 的创造需要 先明确 queue (families)


Vulkan lets you assign priorities to queues to influence the scheduling of com- mand buffer execution using floating point numbers between 0.0 and 1.0.

presentation images in screen
vulkan 不能直接与系统的窗口系统交互，需要使用window system integration  扩展
VkSurfaceKHR 表示surface 由 glfw 创建的窗口支撑

swap chain 用于 framebuffer
swap chain 里面包含一系列的rendered 并且 将要去屏幕上的 images
从交换链中获取一张image，draw，然后返回至 present queue
同步图像呈现和屏幕的刷新率


check swap chains
format
present mode

image 位于 swapchain 上
iamge view 根据 image 创造


graphics pipeline
shader

fixed state
programmed stage
dynamic state

render pass object specify:  如何看待和使用image
the number of color and depth buffers
how to sample such buffers
how to use the content of such buffers

stencil ??

texture and framebuffer: image
but they layout.... or pixel layout , can vary.

subpasses and attachment references
subpasses: subsequent rendering ops depend on thecontents of framebuffers in previous passes


shader stage
fixed state
pipeline layout
render pass

一个render pass 渲染出一个framebuffer
framebuffer

command buffer object


semaphores for gpu  auto reset
binary and timeline

fences for cpu   manually reset